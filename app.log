2025-06-13 05:31:59,400 INFO     [main.py:27] Приложение запущено
2025-06-13 05:32:16,961 DEBUG    [main.py:32] Входящий запрос: GET http://127.0.0.1:8000/healthcheck
2025-06-13 05:32:16,961 DEBUG    [main.py:51] Проверка работоспособности
2025-06-13 05:32:16,962 DEBUG    [main.py:35] Ответ: 200
2025-06-13 05:33:03,305 DEBUG    [main.py:32] Входящий запрос: GET http://127.0.0.1:8000/api/v1/admin/balance/
2025-06-13 05:33:03,306 DEBUG    [deps.py:90] Начало обработки авторизации. Заголовок: None
2025-06-13 05:33:03,306 WARNING  [deps.py:93] Заголовок Authorization отсутствует полностью
2025-06-13 05:33:03,307 ERROR    [deps.py:141] HTTP ошибка: Требуется заголовок Authorization
Traceback (most recent call last):
  File "/app/app/deps.py", line 94, in get_current_user
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: Требуется заголовок Authorization
2025-06-13 05:33:03,311 DEBUG    [main.py:35] Ответ: 401
2025-06-13 06:24:30,772 INFO     [main.py:27] Приложение запущено
2025-06-13 06:24:34,342 DEBUG    [main.py:32] Входящий запрос: GET http://127.0.0.1:8000/docs
2025-06-13 06:24:34,342 DEBUG    [main.py:35] Ответ: 200
2025-06-13 06:24:34,491 DEBUG    [main.py:32] Входящий запрос: GET http://127.0.0.1:8000/openapi.json
2025-06-13 06:24:34,508 DEBUG    [main.py:35] Ответ: 200
2025-06-13 06:24:39,167 DEBUG    [main.py:32] Входящий запрос: POST http://127.0.0.1:8000/api/v1/public/register
2025-06-13 06:24:39,220 INFO     [base.py:1842] select pg_catalog.version()
2025-06-13 06:24:39,221 INFO     [base.py:1842] [raw sql] ()
2025-06-13 06:24:39,222 INFO     [base.py:1842] select current_schema()
2025-06-13 06:24:39,222 INFO     [base.py:1842] [raw sql] ()
2025-06-13 06:24:39,224 INFO     [base.py:1842] show standard_conforming_strings
2025-06-13 06:24:39,224 INFO     [base.py:1842] [raw sql] ()
2025-06-13 06:24:39,225 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 06:24:39,227 INFO     [base.py:1842] INSERT INTO users (id, username, password_hash, api_key, role, created_at) VALUES ($1::UUID, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::userrole, $6::TIMESTAMP WITH TIME ZONE)
2025-06-13 06:24:39,227 INFO     [base.py:1842] [generated in 0.00027s] (UUID('14682949-4c61-44c6-85c6-539ab015f6f9'), 'ivan_ivanov', '', 'ebb46b9d-4e7b-4c53-956f-d1962a58b215', 'USER', datetime.datetime(2025, 6, 13, 6, 24, 39, 227781, tzinfo=datetime.timezone.utc))
2025-06-13 06:24:39,262 INFO     [base.py:2704] COMMIT
2025-06-13 06:24:39,274 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 06:24:39,276 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.id = $1::UUID
2025-06-13 06:24:39,276 INFO     [base.py:1842] [generated in 0.00032s] (UUID('14682949-4c61-44c6-85c6-539ab015f6f9'),)
2025-06-13 06:24:39,281 INFO     [base.py:2701] ROLLBACK
2025-06-13 06:24:39,282 DEBUG    [main.py:35] Ответ: 201
2025-06-13 06:24:55,283 DEBUG    [main.py:32] Входящий запрос: GET http://127.0.0.1:8000/healthcheck
2025-06-13 06:24:55,286 DEBUG    [main.py:51] Проверка работоспособности
2025-06-13 06:24:55,289 DEBUG    [main.py:35] Ответ: 200
2025-06-13 06:25:05,429 DEBUG    [main.py:32] Входящий запрос: GET http://127.0.0.1:8000/api/v1/admin/balance/
2025-06-13 06:25:05,441 DEBUG    [main.py:35] Ответ: 401
2025-06-13 06:30:49,779 INFO     [main.py:27] Приложение запущено
2025-06-13 06:30:53,017 DEBUG    [main.py:32] Входящий запрос: GET http://127.0.0.1:8000/docs
2025-06-13 06:30:53,018 DEBUG    [main.py:35] Ответ: 200
2025-06-13 06:30:53,195 DEBUG    [main.py:32] Входящий запрос: GET http://127.0.0.1:8000/openapi.json
2025-06-13 06:30:53,212 DEBUG    [main.py:35] Ответ: 200
2025-06-13 06:31:55,395 DEBUG    [main.py:32] Входящий запрос: GET http://127.0.0.1:8000/api/v1/admin/balance/
2025-06-13 06:31:55,397 DEBUG    [main.py:35] Ответ: 422
2025-06-13 06:33:37,014 INFO     [main.py:27] Приложение запущено
2025-06-13 06:33:56,569 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/
2025-06-13 06:33:56,570 DEBUG    [main.py:35] Ответ: 404
2025-06-13 06:33:56,827 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/favicon.ico
2025-06-13 06:33:56,828 DEBUG    [main.py:35] Ответ: 404
2025-06-13 06:34:00,914 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/docs
2025-06-13 06:34:00,914 DEBUG    [main.py:35] Ответ: 200
2025-06-13 06:34:01,023 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/openapi.json
2025-06-13 06:34:01,040 DEBUG    [main.py:35] Ответ: 200
2025-06-13 06:34:06,164 DEBUG    [main.py:32] Входящий запрос: POST http://localhost:8000/api/v1/public/register
2025-06-13 06:34:06,207 INFO     [base.py:1842] select pg_catalog.version()
2025-06-13 06:34:06,207 INFO     [base.py:1842] [raw sql] ()
2025-06-13 06:34:06,209 INFO     [base.py:1842] select current_schema()
2025-06-13 06:34:06,209 INFO     [base.py:1842] [raw sql] ()
2025-06-13 06:34:06,211 INFO     [base.py:1842] show standard_conforming_strings
2025-06-13 06:34:06,211 INFO     [base.py:1842] [raw sql] ()
2025-06-13 06:34:06,217 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 06:34:06,221 INFO     [base.py:1842] INSERT INTO users (id, username, password_hash, api_key, role, created_at) VALUES ($1::UUID, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::userrole, $6::TIMESTAMP WITH TIME ZONE)
2025-06-13 06:34:06,221 INFO     [base.py:1842] [generated in 0.00055s] (UUID('134b5875-09ac-4cc0-b148-a22820a3de74'), 'ivan_ivanov', '', '4cba5079-5ece-4245-a5c7-b0f2f367c952', 'USER', datetime.datetime(2025, 6, 13, 6, 34, 6, 221330, tzinfo=datetime.timezone.utc))
2025-06-13 06:34:06,235 INFO     [base.py:2704] COMMIT
2025-06-13 06:34:06,240 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 06:34:06,243 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.id = $1::UUID
2025-06-13 06:34:06,243 INFO     [base.py:1842] [generated in 0.00034s] (UUID('134b5875-09ac-4cc0-b148-a22820a3de74'),)
2025-06-13 06:34:06,246 INFO     [base.py:2701] ROLLBACK
2025-06-13 06:34:06,248 DEBUG    [main.py:35] Ответ: 201
2025-06-13 06:34:21,952 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/api/v1/admin/balance/
2025-06-13 06:34:21,955 DEBUG    [main.py:35] Ответ: 422
2025-06-13 06:40:27,931 INFO     [main.py:27] Приложение запущено
2025-06-13 06:40:38,866 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/docs
2025-06-13 06:40:38,867 DEBUG    [main.py:35] Ответ: 200
2025-06-13 06:40:39,125 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/openapi.json
2025-06-13 06:40:39,149 DEBUG    [main.py:35] Ответ: 200
2025-06-13 06:40:50,660 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/api/v1/admin/balance/
2025-06-13 06:40:50,661 DEBUG    [main.py:35] Ответ: 422
2025-06-13 06:42:27,203 DEBUG    [main.py:32] Входящий запрос: POST http://localhost:8000/api/v1/public/register
2025-06-13 06:42:27,277 INFO     [base.py:1842] select pg_catalog.version()
2025-06-13 06:42:27,278 INFO     [base.py:1842] [raw sql] ()
2025-06-13 06:42:27,284 INFO     [base.py:1842] select current_schema()
2025-06-13 06:42:27,285 INFO     [base.py:1842] [raw sql] ()
2025-06-13 06:42:27,293 INFO     [base.py:1842] show standard_conforming_strings
2025-06-13 06:42:27,293 INFO     [base.py:1842] [raw sql] ()
2025-06-13 06:42:27,295 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 06:42:27,313 INFO     [base.py:1842] INSERT INTO users (id, username, password_hash, api_key, role, created_at) VALUES ($1::UUID, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::userrole, $6::TIMESTAMP WITH TIME ZONE)
2025-06-13 06:42:27,314 INFO     [base.py:1842] [generated in 0.00086s] (UUID('548d8690-6d39-469b-9a8d-babc1d146888'), 'ivaaan_ivanov', '', '679f4ec6-0f2d-46cb-92b7-6a6162d96a05', 'ADMIN', datetime.datetime(2025, 6, 13, 6, 42, 27, 313627, tzinfo=datetime.timezone.utc))
2025-06-13 06:42:27,338 INFO     [base.py:2704] COMMIT
2025-06-13 06:42:27,351 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 06:42:27,354 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.id = $1::UUID
2025-06-13 06:42:27,355 INFO     [base.py:1842] [generated in 0.00049s] (UUID('548d8690-6d39-469b-9a8d-babc1d146888'),)
2025-06-13 06:42:27,364 INFO     [base.py:2701] ROLLBACK
2025-06-13 06:42:27,366 DEBUG    [main.py:35] Ответ: 201
2025-06-13 06:42:55,137 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/api/v1/admin/users
2025-06-13 06:42:55,153 DEBUG    [main.py:35] Ответ: 422
2025-06-13 06:46:21,126 DEBUG    [main.py:32] Входящий запрос: GET http://127.0.0.1:8000/api/v1/balance/
2025-06-13 06:46:21,128 DEBUG    [main.py:35] Ответ: 404
2025-06-13 06:46:43,644 INFO     [main.py:27] Приложение запущено
2025-06-13 06:46:48,056 DEBUG    [main.py:32] Входящий запрос: GET http://127.0.0.1:8000/api/v1/balance/
2025-06-13 06:46:48,056 DEBUG    [main.py:35] Ответ: 404
2025-06-13 06:47:17,809 DEBUG    [main.py:32] Входящий запрос: GET http://127.0.0.1:8000/api/v1/balance/
2025-06-13 06:47:17,810 DEBUG    [main.py:35] Ответ: 404
2025-06-13 06:49:01,425 DEBUG    [main.py:32] Входящий запрос: GET http://127.0.0.1:8000/api/v1/admin/balance/
2025-06-13 06:49:01,456 INFO     [base.py:1842] select pg_catalog.version()
2025-06-13 06:49:01,456 INFO     [base.py:1842] [raw sql] ()
2025-06-13 06:49:01,457 INFO     [base.py:1842] select current_schema()
2025-06-13 06:49:01,457 INFO     [base.py:1842] [raw sql] ()
2025-06-13 06:49:01,458 INFO     [base.py:1842] show standard_conforming_strings
2025-06-13 06:49:01,458 INFO     [base.py:1842] [raw sql] ()
2025-06-13 06:49:01,460 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 06:49:01,472 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.api_key = $1::VARCHAR
2025-06-13 06:49:01,473 INFO     [base.py:1842] [generated in 0.00031s] ('4cba5079-5ece-4245-a5c7-b0f2f367c5c7',)
2025-06-13 06:49:01,482 INFO     [base.py:2701] ROLLBACK
2025-06-13 06:49:01,483 DEBUG    [main.py:35] Ответ: 401
2025-06-13 06:51:26,274 DEBUG    [main.py:32] Входящий запрос: GET http://127.0.0.1:8000/api/v1/admin/balance/
2025-06-13 06:51:26,275 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 06:51:26,276 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.api_key = $1::VARCHAR
2025-06-13 06:51:26,276 INFO     [base.py:1842] [cached since 139s ago] ('679f4ec6-0f2d-46cb-92b7-6a6162d96a05',)
2025-06-13 06:51:26,279 INFO     [base.py:2701] ROLLBACK
2025-06-13 06:51:26,280 ERROR    [main.py:38] Ошибка при обработке запроса: SQL expression element or literal value expected, got <app.models.User object at 0x7f1fc5e5d390>.
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/coercions.py", line 803, in _literal_coercion
    return expr._bind_param(operator, element, type_=bindparam_type)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 4624, in _bind_param
    return BindParameter(
           ^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 2043, in __init__
    self.type = _compared_to_type.coerce_compared_value(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 3711, in coerce_compared_value
    return super().coerce_compared_value(op, value)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/type_api.py", line 1059, in coerce_compared_value
    _coerced_type = _resolve_value_to_type(value)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 3902, in _resolve_value_to_type
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Object <app.models.User object at 0x7f1fc5e5d390> is not legal as a SQL literal value

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/app/main.py", line 34, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 156, in call_next
    raise app_exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/api/balance.py", line 26, in get_balances
    stmt = select(Balance).where(Balance.user_id == current_user)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/operators.py", line 584, in __eq__
    return self.operate(eq, other)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/attributes.py", line 453, in operate
    return op(self.comparator, *other, **kwargs)  # type: ignore[no-any-return]  # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/operators.py", line 584, in __eq__
    return self.operate(eq, other)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/properties.py", line 479, in operate
    return op(self.__clause_element__(), *other, **kwargs)  # type: ignore[no-any-return]  # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/annotation.py", line 371, in __eq__
    return self.__element.__class__.__eq__(self, other)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/operators.py", line 584, in __eq__
    return self.operate(eq, other)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 1523, in operate
    return op(self.comparator, *other, **kwargs)  # type: ignore[no-any-return]  # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/operators.py", line 584, in __eq__
    return self.operate(eq, other)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/type_api.py", line 212, in operate
    return op_fn(self.expr, op, *other, **addtl_kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/default_comparator.py", line 121, in _boolean_compare
    obj = coercions.expect(
          ^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/coercions.py", line 395, in expect
    resolved = impl._literal_coercion(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/coercions.py", line 805, in _literal_coercion
    self._raise_for_expected(element, err=err)
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/coercions.py", line 784, in _raise_for_expected
    return super()._raise_for_expected(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/coercions.py", line 518, in _raise_for_expected
    raise exc.ArgumentError(msg, code=code) from err
sqlalchemy.exc.ArgumentError: SQL expression element or literal value expected, got <app.models.User object at 0x7f1fc5e5d390>.
2025-06-13 06:53:48,328 INFO     [main.py:27] Приложение запущено
2025-06-13 06:53:49,635 DEBUG    [main.py:32] Входящий запрос: GET http://127.0.0.1:8000/api/v1/admin/balance/
2025-06-13 06:53:49,663 INFO     [base.py:1842] select pg_catalog.version()
2025-06-13 06:53:49,663 INFO     [base.py:1842] [raw sql] ()
2025-06-13 06:53:49,665 INFO     [base.py:1842] select current_schema()
2025-06-13 06:53:49,665 INFO     [base.py:1842] [raw sql] ()
2025-06-13 06:53:49,667 INFO     [base.py:1842] show standard_conforming_strings
2025-06-13 06:53:49,667 INFO     [base.py:1842] [raw sql] ()
2025-06-13 06:53:49,668 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 06:53:49,682 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.api_key = $1::VARCHAR
2025-06-13 06:53:49,682 INFO     [base.py:1842] [generated in 0.00028s] ('679f4ec6-0f2d-46cb-92b7-6a6162d96a05',)
2025-06-13 06:53:49,691 INFO     [base.py:1842] SELECT balances.id, balances.user_id, balances.ticker, balances.amount 
FROM balances 
WHERE balances.user_id = $1::UUID
2025-06-13 06:53:49,691 INFO     [base.py:1842] [generated in 0.00027s] (UUID('548d8690-6d39-469b-9a8d-babc1d146888'),)
2025-06-13 06:53:49,695 INFO     [base.py:2701] ROLLBACK
2025-06-13 06:53:49,695 DEBUG    [main.py:35] Ответ: 200
2025-06-13 06:54:09,300 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/docs
2025-06-13 06:54:09,300 DEBUG    [main.py:35] Ответ: 200
2025-06-13 06:54:09,415 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/openapi.json
2025-06-13 06:54:09,458 DEBUG    [main.py:35] Ответ: 200
2025-06-13 06:54:22,022 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/api/v1/admin/balance/
2025-06-13 06:54:22,023 DEBUG    [main.py:35] Ответ: 422
2025-06-13 06:56:09,226 DEBUG    [main.py:32] Входящий запрос: GET http://127.0.0.1:8000/api/v1/admin/bausers
2025-06-13 06:56:09,227 DEBUG    [main.py:35] Ответ: 404
2025-06-13 06:56:24,832 DEBUG    [main.py:32] Входящий запрос: GET http://127.0.0.1:8000/api/v1/admin/balance/
2025-06-13 06:56:24,833 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 06:56:24,834 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.api_key = $1::VARCHAR
2025-06-13 06:56:24,834 INFO     [base.py:1842] [cached since 149.3s ago] ('679f4ec6-0f2d-46cb-92b7-6a6162d96a05',)
2025-06-13 06:56:24,836 INFO     [base.py:1842] SELECT balances.id, balances.user_id, balances.ticker, balances.amount 
FROM balances 
WHERE balances.user_id = $1::UUID
2025-06-13 06:56:24,836 INFO     [base.py:1842] [cached since 149.3s ago] (UUID('548d8690-6d39-469b-9a8d-babc1d146888'),)
2025-06-13 06:56:24,837 INFO     [base.py:2701] ROLLBACK
2025-06-13 06:56:24,838 DEBUG    [main.py:35] Ответ: 200
2025-06-13 06:57:06,399 DEBUG    [main.py:32] Входящий запрос: GET http://127.0.0.1:8000/api/v1/admin/users
2025-06-13 06:57:06,400 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 06:57:06,400 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.api_key = $1::VARCHAR
2025-06-13 06:57:06,400 INFO     [base.py:1842] [cached since 188.6s ago] ('679f4ec6-0f2d-46cb-92b7-6a6162d96a05',)
2025-06-13 06:57:06,402 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.id = $1::UUID
2025-06-13 06:57:06,402 INFO     [base.py:1842] [generated in 0.00019s] (UUID('548d8690-6d39-469b-9a8d-babc1d146888'),)
2025-06-13 06:57:06,403 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users
2025-06-13 06:57:06,404 INFO     [base.py:1842] [generated in 0.00019s] ()
2025-06-13 06:57:06,405 INFO     [base.py:2701] ROLLBACK
2025-06-13 06:57:06,405 DEBUG    [main.py:35] Ответ: 200
2025-06-13 06:57:57,461 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/api/v1/admin/users
2025-06-13 06:57:57,462 DEBUG    [main.py:35] Ответ: 422
2025-06-13 07:00:04,922 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/docs
2025-06-13 07:00:04,923 DEBUG    [main.py:35] Ответ: 200
2025-06-13 07:00:05,123 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/openapi.json
2025-06-13 07:00:05,124 DEBUG    [main.py:35] Ответ: 200
2025-06-13 07:00:09,231 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/api/v1/admin/users
2025-06-13 07:00:09,233 DEBUG    [main.py:35] Ответ: 422
2025-06-13 08:57:50,375 INFO     [main.py:27] Приложение запущено
2025-06-13 08:57:54,220 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/docs
2025-06-13 08:57:54,221 DEBUG    [main.py:35] Ответ: 200
2025-06-13 08:57:54,320 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/openapi.json
2025-06-13 08:57:54,339 DEBUG    [main.py:35] Ответ: 200
2025-06-13 08:58:54,278 INFO     [main.py:27] Приложение запущено
2025-06-13 08:59:01,777 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/docs
2025-06-13 08:59:01,777 DEBUG    [main.py:35] Ответ: 200
2025-06-13 08:59:01,950 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/openapi.json
2025-06-13 08:59:01,965 DEBUG    [main.py:35] Ответ: 200
2025-06-13 08:59:13,175 DEBUG    [main.py:32] Входящий запрос: POST http://localhost:8000/api/v1/public/register
2025-06-13 08:59:13,214 INFO     [base.py:1842] select pg_catalog.version()
2025-06-13 08:59:13,214 INFO     [base.py:1842] [raw sql] ()
2025-06-13 08:59:13,215 INFO     [base.py:1842] select current_schema()
2025-06-13 08:59:13,216 INFO     [base.py:1842] [raw sql] ()
2025-06-13 08:59:13,217 INFO     [base.py:1842] show standard_conforming_strings
2025-06-13 08:59:13,217 INFO     [base.py:1842] [raw sql] ()
2025-06-13 08:59:13,218 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 08:59:13,219 INFO     [base.py:1842] INSERT INTO users (id, username, password_hash, api_key, role, created_at) VALUES ($1::UUID, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::userrole, $6::TIMESTAMP WITH TIME ZONE)
2025-06-13 08:59:13,220 INFO     [base.py:1842] [generated in 0.00024s] (UUID('51b10f61-5b46-46d4-9511-26c1d6428024'), 'ivan_ivanov', '', '50458f70-9213-4a9d-b4fb-0d7f01bde9eb', 'ADMIN', datetime.datetime(2025, 6, 13, 8, 59, 13, 219831, tzinfo=datetime.timezone.utc))
2025-06-13 08:59:13,229 INFO     [base.py:2704] COMMIT
2025-06-13 08:59:13,236 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 08:59:13,238 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.id = $1::UUID
2025-06-13 08:59:13,238 INFO     [base.py:1842] [generated in 0.00024s] (UUID('51b10f61-5b46-46d4-9511-26c1d6428024'),)
2025-06-13 08:59:13,240 INFO     [base.py:2701] ROLLBACK
2025-06-13 08:59:13,241 DEBUG    [main.py:35] Ответ: 201
2025-06-13 08:59:39,214 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/api/v1/admin/balance/
2025-06-13 08:59:39,215 DEBUG    [main.py:35] Ответ: 422
2025-06-13 09:04:32,013 INFO     [main.py:27] Приложение запущено
2025-06-13 09:04:40,632 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/docs
2025-06-13 09:04:40,633 DEBUG    [main.py:35] Ответ: 200
2025-06-13 09:04:40,836 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/openapi.json
2025-06-13 09:04:40,853 DEBUG    [main.py:35] Ответ: 200
2025-06-13 09:05:17,761 INFO     [main.py:27] Приложение запущено
2025-06-13 09:05:37,453 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/docs
2025-06-13 09:05:37,454 DEBUG    [main.py:35] Ответ: 200
2025-06-13 09:05:37,701 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/openapi.json
2025-06-13 09:05:37,718 DEBUG    [main.py:35] Ответ: 200
2025-06-13 09:05:48,414 DEBUG    [main.py:32] Входящий запрос: POST http://localhost:8000/api/v1/public/register
2025-06-13 09:05:48,454 INFO     [base.py:1842] select pg_catalog.version()
2025-06-13 09:05:48,455 INFO     [base.py:1842] [raw sql] ()
2025-06-13 09:05:48,456 INFO     [base.py:1842] select current_schema()
2025-06-13 09:05:48,456 INFO     [base.py:1842] [raw sql] ()
2025-06-13 09:05:48,458 INFO     [base.py:1842] show standard_conforming_strings
2025-06-13 09:05:48,458 INFO     [base.py:1842] [raw sql] ()
2025-06-13 09:05:48,459 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 09:05:48,461 INFO     [base.py:1842] INSERT INTO users (id, username, password_hash, api_key, role, created_at) VALUES ($1::UUID, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::userrole, $6::TIMESTAMP WITH TIME ZONE)
2025-06-13 09:05:48,461 INFO     [base.py:1842] [generated in 0.00026s] (UUID('64180fb0-ef4f-4a6d-96f7-272a81ab2c16'), 'ivan_ivanov', '', 'key-9470ea3e-8b1f-4e41-874d-a899398fa4b9', 'ADMIN', datetime.datetime(2025, 6, 13, 9, 5, 48, 461138, tzinfo=datetime.timezone.utc))
2025-06-13 09:05:48,471 INFO     [base.py:2704] COMMIT
2025-06-13 09:05:48,474 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 09:05:48,476 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.id = $1::UUID
2025-06-13 09:05:48,476 INFO     [base.py:1842] [generated in 0.00031s] (UUID('64180fb0-ef4f-4a6d-96f7-272a81ab2c16'),)
2025-06-13 09:05:48,478 INFO     [base.py:2701] ROLLBACK
2025-06-13 09:05:48,479 DEBUG    [main.py:35] Ответ: 201
2025-06-13 09:06:11,119 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/api/v1/admin/balance/
2025-06-13 09:06:11,120 DEBUG    [main.py:35] Ответ: 422
2025-06-13 09:06:17,528 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/api/v1/admin/balance/
2025-06-13 09:06:17,529 DEBUG    [main.py:35] Ответ: 422
2025-06-13 09:09:07,487 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/api/v1/admin/users
2025-06-13 09:09:07,489 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 09:09:07,490 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.api_key = $1::VARCHAR
2025-06-13 09:09:07,490 INFO     [base.py:1842] [generated in 0.00025s] ('key-9470ea3e-8b1f-4e41-874d-a899398fa4b9',)
2025-06-13 09:09:07,494 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.id = $1::UUID
2025-06-13 09:09:07,494 INFO     [base.py:1842] [generated in 0.00028s] (UUID('64180fb0-ef4f-4a6d-96f7-272a81ab2c16'),)
2025-06-13 09:09:07,496 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users
2025-06-13 09:09:07,496 INFO     [base.py:1842] [generated in 0.00026s] ()
2025-06-13 09:09:07,498 INFO     [base.py:2701] ROLLBACK
2025-06-13 09:09:07,499 DEBUG    [main.py:35] Ответ: 200
2025-06-13 09:09:34,156 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/api/v1/admin/balance/
2025-06-13 09:09:34,157 DEBUG    [main.py:35] Ответ: 422
2025-06-13 09:45:03,178 INFO     [main.py:80] Приложение запущено
2025-06-13 09:45:06,802 DEBUG    [main.py:85] Входящий запрос: GET http://localhost:8000/docs
2025-06-13 09:45:06,803 DEBUG    [main.py:88] Ответ: 200
2025-06-13 09:45:08,398 DEBUG    [main.py:85] Входящий запрос: GET http://localhost:8000/openapi.json
2025-06-13 09:45:08,418 DEBUG    [main.py:88] Ответ: 200
2025-06-13 09:47:05,879 INFO     [main.py:81] Приложение запущено
2025-06-13 09:47:08,757 DEBUG    [main.py:86] Входящий запрос: GET http://localhost:8000/docs
2025-06-13 09:47:08,758 DEBUG    [main.py:89] Ответ: 200
2025-06-13 09:47:08,930 DEBUG    [main.py:86] Входящий запрос: GET http://localhost:8000/openapi.json
2025-06-13 09:47:08,952 DEBUG    [main.py:89] Ответ: 200
2025-06-13 09:47:42,746 DEBUG    [main.py:86] Входящий запрос: POST http://localhost:8000/api/v1/public/register
2025-06-13 09:47:42,789 INFO     [base.py:1842] select pg_catalog.version()
2025-06-13 09:47:42,789 INFO     [base.py:1842] [raw sql] ()
2025-06-13 09:47:42,791 INFO     [base.py:1842] select current_schema()
2025-06-13 09:47:42,791 INFO     [base.py:1842] [raw sql] ()
2025-06-13 09:47:42,792 INFO     [base.py:1842] show standard_conforming_strings
2025-06-13 09:47:42,792 INFO     [base.py:1842] [raw sql] ()
2025-06-13 09:47:42,794 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 09:47:42,796 INFO     [base.py:1842] INSERT INTO users (id, username, password_hash, api_key, role, created_at) VALUES ($1::UUID, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::userrole, $6::TIMESTAMP WITH TIME ZONE)
2025-06-13 09:47:42,796 INFO     [base.py:1842] [generated in 0.00030s] (UUID('e6898af9-85c8-479d-893f-1a7cb92ab13f'), 'goododdd', '', 'key-91e5f14a-5265-49a6-826f-c4fd42681237', 'ADMIN', datetime.datetime(2025, 6, 13, 9, 47, 42, 796321, tzinfo=datetime.timezone.utc))
2025-06-13 09:47:42,813 INFO     [base.py:2704] COMMIT
2025-06-13 09:47:42,816 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 09:47:42,818 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.id = $1::UUID
2025-06-13 09:47:42,818 INFO     [base.py:1842] [generated in 0.00030s] (UUID('e6898af9-85c8-479d-893f-1a7cb92ab13f'),)
2025-06-13 09:47:42,821 INFO     [base.py:2701] ROLLBACK
2025-06-13 09:47:42,821 DEBUG    [main.py:89] Ответ: 201
2025-06-13 09:47:55,529 DEBUG    [main.py:86] Входящий запрос: GET http://localhost:8000/api/v1/admin/balance/
2025-06-13 09:47:55,532 DEBUG    [main.py:89] Ответ: 422
2025-06-13 10:11:54,100 INFO     [main.py:27] Приложение запущено
2025-06-13 10:12:38,300 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/docs
2025-06-13 10:12:38,301 DEBUG    [main.py:35] Ответ: 200
2025-06-13 10:12:38,420 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/openapi.json
2025-06-13 10:12:38,438 DEBUG    [main.py:35] Ответ: 200
2025-06-13 10:13:42,157 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/api/v1/admin/users
2025-06-13 10:13:42,159 DEBUG    [main.py:35] Ответ: 422
2025-06-13 10:15:05,180 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/api/v1/admin/users
2025-06-13 10:15:05,182 DEBUG    [main.py:35] Ответ: 422
2025-06-13 11:23:25,838 INFO     [main.py:27] Приложение запущено
2025-06-13 11:23:49,293 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/docs
2025-06-13 11:23:49,294 DEBUG    [main.py:35] Ответ: 200
2025-06-13 11:23:49,441 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/openapi.json
2025-06-13 11:23:49,461 DEBUG    [main.py:35] Ответ: 200
2025-06-13 11:25:10,210 INFO     [main.py:27] Приложение запущено
2025-06-13 11:25:36,041 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/
2025-06-13 11:25:36,042 DEBUG    [main.py:35] Ответ: 404
2025-06-13 11:25:36,233 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/favicon.ico
2025-06-13 11:25:36,233 DEBUG    [main.py:35] Ответ: 404
2025-06-13 11:25:44,885 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/docs
2025-06-13 11:25:44,886 DEBUG    [main.py:35] Ответ: 200
2025-06-13 11:25:45,000 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/openapi.json
2025-06-13 11:25:45,019 DEBUG    [main.py:35] Ответ: 200
2025-06-13 11:25:54,265 DEBUG    [main.py:32] Входящий запрос: POST http://localhost:8000/api/v1/public/register
2025-06-13 11:25:54,310 INFO     [base.py:1842] select pg_catalog.version()
2025-06-13 11:25:54,310 INFO     [base.py:1842] [raw sql] ()
2025-06-13 11:25:54,311 INFO     [base.py:1842] select current_schema()
2025-06-13 11:25:54,311 INFO     [base.py:1842] [raw sql] ()
2025-06-13 11:25:54,313 INFO     [base.py:1842] show standard_conforming_strings
2025-06-13 11:25:54,313 INFO     [base.py:1842] [raw sql] ()
2025-06-13 11:25:54,315 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 11:25:54,317 INFO     [base.py:1842] INSERT INTO users (id, username, password_hash, api_key, role, created_at) VALUES ($1::UUID, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::userrole, $6::TIMESTAMP WITH TIME ZONE)
2025-06-13 11:25:54,317 INFO     [base.py:1842] [generated in 0.00030s] (UUID('8f394d39-eb2c-47b6-91ff-2db4f6cc40ec'), 'ivan_ivanov', '', 'key-5cb0ddaa-b774-47ee-882b-9435a048cbe1', 'ADMIN', datetime.datetime(2025, 6, 13, 11, 25, 54, 317273, tzinfo=datetime.timezone.utc))
2025-06-13 11:25:54,328 INFO     [base.py:2704] COMMIT
2025-06-13 11:25:54,332 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 11:25:54,334 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.id = $1::UUID
2025-06-13 11:25:54,334 INFO     [base.py:1842] [generated in 0.00023s] (UUID('8f394d39-eb2c-47b6-91ff-2db4f6cc40ec'),)
2025-06-13 11:25:54,336 INFO     [base.py:2701] ROLLBACK
2025-06-13 11:25:54,337 DEBUG    [main.py:35] Ответ: 201
2025-06-13 11:26:07,247 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/api/v1/admin/balance/
2025-06-13 11:26:07,248 DEBUG    [main.py:35] Ответ: 422
2025-06-13 15:10:44,526 INFO     [main.py:27] Приложение запущено
2025-06-13 15:10:48,294 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/docs
2025-06-13 15:10:48,295 DEBUG    [main.py:35] Ответ: 200
2025-06-13 15:10:48,393 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/openapi.json
2025-06-13 15:10:48,412 DEBUG    [main.py:35] Ответ: 200
2025-06-13 15:11:26,458 DEBUG    [main.py:32] Входящий запрос: POST http://localhost:8000/api/v1/public/register
2025-06-13 15:11:26,460 DEBUG    [main.py:35] Ответ: 422
2025-06-13 15:11:49,655 DEBUG    [main.py:32] Входящий запрос: POST http://localhost:8000/api/v1/public/register
2025-06-13 15:11:49,656 DEBUG    [main.py:35] Ответ: 422
2025-06-13 15:12:39,009 INFO     [main.py:27] Приложение запущено
2025-06-13 15:12:48,480 DEBUG    [main.py:32] Входящий запрос: POST http://localhost:8000/api/v1/public/register
2025-06-13 15:12:48,514 INFO     [base.py:1842] select pg_catalog.version()
2025-06-13 15:12:48,514 INFO     [base.py:1842] [raw sql] ()
2025-06-13 15:12:48,515 INFO     [base.py:1842] select current_schema()
2025-06-13 15:12:48,516 INFO     [base.py:1842] [raw sql] ()
2025-06-13 15:12:48,516 INFO     [base.py:1842] show standard_conforming_strings
2025-06-13 15:12:48,516 INFO     [base.py:1842] [raw sql] ()
2025-06-13 15:12:48,517 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 15:12:48,519 INFO     [base.py:1842] INSERT INTO users (id, username, password_hash, api_key, role, created_at) VALUES ($1::UUID, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::userrole, $6::TIMESTAMP WITH TIME ZONE)
2025-06-13 15:12:48,519 INFO     [base.py:1842] [generated in 0.00022s] (UUID('b2aacda2-224f-4753-84d6-90a26274ac37'), 'tochka-test-user-1-f3027270-e24c-4ddd-a586-73d448300a37', '', 'key-e1f3166f-4eb1-4c18-8946-06ccc9f63e34', 'USER', datetime.datetime(2025, 6, 13, 15, 12, 48, 519475, tzinfo=datetime.timezone.utc))
2025-06-13 15:12:48,526 INFO     [base.py:2704] COMMIT
2025-06-13 15:12:48,530 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 15:12:48,532 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.id = $1::UUID
2025-06-13 15:12:48,532 INFO     [base.py:1842] [generated in 0.00019s] (UUID('b2aacda2-224f-4753-84d6-90a26274ac37'),)
2025-06-13 15:12:48,533 INFO     [base.py:2701] ROLLBACK
2025-06-13 15:12:48,534 DEBUG    [main.py:35] Ответ: 201
2025-06-13 15:15:05,385 DEBUG    [main.py:32] Входящий запрос: DELETE http://localhost:8000/api/v1/admin/user/tochka-test-user-1-f3027270-e24c-4ddd-a586-73d448300a37
2025-06-13 15:15:05,387 DEBUG    [main.py:35] Ответ: 422
2025-06-13 15:15:48,487 DEBUG    [main.py:32] Входящий запрос: POST http://localhost:8000/api/v1/public/register
2025-06-13 15:15:48,490 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 15:15:48,490 INFO     [base.py:1842] INSERT INTO users (id, username, password_hash, api_key, role, created_at) VALUES ($1::UUID, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::userrole, $6::TIMESTAMP WITH TIME ZONE)
2025-06-13 15:15:48,490 INFO     [base.py:1842] [cached since 166.3s ago] (UUID('c26a40a5-f620-4f3f-8876-dc80101a7e34'), 'ivan_ivanov', '', 'key-0712eb75-437f-4b84-98e2-80c09491ebe3', 'ADMIN', datetime.datetime(2025, 6, 13, 15, 15, 48, 490709, tzinfo=datetime.timezone.utc))
2025-06-13 15:15:48,492 INFO     [base.py:2704] COMMIT
2025-06-13 15:15:48,496 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 15:15:48,496 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.id = $1::UUID
2025-06-13 15:15:48,497 INFO     [base.py:1842] [cached since 166.3s ago] (UUID('c26a40a5-f620-4f3f-8876-dc80101a7e34'),)
2025-06-13 15:15:48,498 INFO     [base.py:2701] ROLLBACK
2025-06-13 15:15:48,499 DEBUG    [main.py:35] Ответ: 201
2025-06-13 15:16:20,328 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/api/v1/admin/users
2025-06-13 15:16:20,329 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 15:16:20,331 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.api_key = $1::VARCHAR
2025-06-13 15:16:20,331 INFO     [base.py:1842] [generated in 0.00028s] ('0712eb75-437f-4b84-98e2-80c09491ebe3',)
2025-06-13 15:16:20,333 INFO     [base.py:2701] ROLLBACK
2025-06-13 15:16:20,334 DEBUG    [main.py:35] Ответ: 401
2025-06-13 15:17:15,995 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/api/v1/admin/users
2025-06-13 15:17:15,996 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 15:17:15,997 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.api_key = $1::VARCHAR
2025-06-13 15:17:15,997 INFO     [base.py:1842] [cached since 50.21s ago] ('0712eb75-437f-4b84-98e2-80c09491ebe3',)
2025-06-13 15:17:15,998 INFO     [base.py:2701] ROLLBACK
2025-06-13 15:17:15,999 DEBUG    [main.py:35] Ответ: 401
2025-06-13 15:17:47,912 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/api/v1/admin/users
2025-06-13 15:17:47,913 DEBUG    [main.py:35] Ответ: 422
2025-06-13 15:22:19,377 DEBUG    [main.py:32] Входящий запрос: POST http://localhost:8000/api/v1/public/register
2025-06-13 15:22:19,379 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 15:22:19,379 INFO     [base.py:1842] INSERT INTO users (id, username, password_hash, api_key, role, created_at) VALUES ($1::UUID, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::userrole, $6::TIMESTAMP WITH TIME ZONE)
2025-06-13 15:22:19,380 INFO     [base.py:1842] [cached since 524.5s ago] (UUID('e8ef0079-5b18-41e2-875e-217e8ca1d41e'), 'tochka-test-user-1-f3027270-e24c-4ddd-a586-73d448300a37', '', 'key-fb6605d9-0b61-48a8-8c91-883e6f6176c1', 'USER', datetime.datetime(2025, 6, 13, 15, 22, 19, 379869, tzinfo=datetime.timezone.utc))
2025-06-13 15:22:19,384 INFO     [base.py:2701] ROLLBACK
2025-06-13 15:22:19,385 DEBUG    [main.py:35] Ответ: 409
2025-06-13 15:23:04,750 DEBUG    [main.py:32] Входящий запрос: DELETE http://localhost:8000/api/v1/admin/user/tochka-test-user-1-f3027270-e24c-4ddd-a586-73d448300a37
2025-06-13 15:23:04,752 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 15:23:04,753 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.api_key = $1::VARCHAR
2025-06-13 15:23:04,753 INFO     [base.py:1842] [cached since 369s ago] ('0712eb75-437f-4b84-98e2-80c09491ebe3',)
2025-06-13 15:23:04,754 INFO     [base.py:2701] ROLLBACK
2025-06-13 15:23:04,755 DEBUG    [main.py:35] Ответ: 401
2025-06-13 15:24:21,309 DEBUG    [main.py:32] Входящий запрос: DELETE http://localhost:8000/api/v1/admin/user/tochka-test-user-1-f3027270-e24c-4ddd-a586-73d448300a37
2025-06-13 15:24:21,310 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 15:24:21,310 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.api_key = $1::VARCHAR
2025-06-13 15:24:21,310 INFO     [base.py:1842] [cached since 440.3s ago] ('0712eb75-437f-4b84-98e2-80c09491ebe3',)
2025-06-13 15:24:21,312 INFO     [base.py:2701] ROLLBACK
2025-06-13 15:24:21,312 DEBUG    [main.py:35] Ответ: 401
2025-06-13 15:27:55,433 INFO     [main.py:27] Приложение запущено
2025-06-13 15:28:45,170 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/docs
2025-06-13 15:28:45,171 DEBUG    [main.py:35] Ответ: 200
2025-06-13 15:28:45,281 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/openapi.json
2025-06-13 15:28:45,300 DEBUG    [main.py:35] Ответ: 200
2025-06-13 15:29:23,915 DEBUG    [main.py:32] Входящий запрос: POST http://localhost:8000/api/v1/public/register
2025-06-13 15:29:23,979 INFO     [base.py:1842] select pg_catalog.version()
2025-06-13 15:29:23,979 INFO     [base.py:1842] [raw sql] ()
2025-06-13 15:29:23,983 INFO     [base.py:1842] select current_schema()
2025-06-13 15:29:23,984 INFO     [base.py:1842] [raw sql] ()
2025-06-13 15:29:23,989 INFO     [base.py:1842] show standard_conforming_strings
2025-06-13 15:29:23,989 INFO     [base.py:1842] [raw sql] ()
2025-06-13 15:29:23,993 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 15:29:23,997 INFO     [base.py:1842] INSERT INTO users (id, username, password_hash, api_key, role, created_at) VALUES ($1::UUID, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::userrole, $6::TIMESTAMP WITH TIME ZONE)
2025-06-13 15:29:23,997 INFO     [base.py:1842] [generated in 0.00038s] (UUID('17f6f8a2-0360-4c95-b051-729442cf7553'), 'tochka-test-user-1-f3027270-e24c-4ddd-a586-73d448300a37', '', '38bb1df7-8a47-4256-8067-507853cfcf1c', 'USER', datetime.datetime(2025, 6, 13, 15, 29, 23, 996918, tzinfo=datetime.timezone.utc))
2025-06-13 15:29:24,019 INFO     [base.py:2704] COMMIT
2025-06-13 15:29:24,024 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 15:29:24,026 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.id = $1::UUID
2025-06-13 15:29:24,026 INFO     [base.py:1842] [generated in 0.00027s] (UUID('17f6f8a2-0360-4c95-b051-729442cf7553'),)
2025-06-13 15:29:24,031 INFO     [base.py:2701] ROLLBACK
2025-06-13 15:29:24,032 DEBUG    [main.py:35] Ответ: 201
2025-06-13 15:30:08,454 DEBUG    [main.py:32] Входящий запрос: POST http://localhost:8000/api/v1/public/register
2025-06-13 15:30:08,455 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 15:30:08,455 INFO     [base.py:1842] INSERT INTO users (id, username, password_hash, api_key, role, created_at) VALUES ($1::UUID, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::userrole, $6::TIMESTAMP WITH TIME ZONE)
2025-06-13 15:30:08,456 INFO     [base.py:1842] [cached since 39.84s ago] (UUID('ba6cae2d-4364-4500-a536-c82ef3f6ee79'), 'ivan_ivanov', '', '8dd097d5-cbac-43ab-a032-3c85e357a117', 'ADMIN', datetime.datetime(2025, 6, 13, 15, 30, 8, 455859, tzinfo=datetime.timezone.utc))
2025-06-13 15:30:08,457 INFO     [base.py:2704] COMMIT
2025-06-13 15:30:08,464 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 15:30:08,464 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.id = $1::UUID
2025-06-13 15:30:08,464 INFO     [base.py:1842] [cached since 39.82s ago] (UUID('ba6cae2d-4364-4500-a536-c82ef3f6ee79'),)
2025-06-13 15:30:08,466 INFO     [base.py:2701] ROLLBACK
2025-06-13 15:30:08,466 DEBUG    [main.py:35] Ответ: 201
2025-06-13 15:30:38,660 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/api/v1/admin/users
2025-06-13 15:30:38,661 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 15:30:38,662 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.api_key = $1::VARCHAR
2025-06-13 15:30:38,662 INFO     [base.py:1842] [generated in 0.00020s] ('8dd097d5-cbac-43ab-a032-3c85e357a117',)
2025-06-13 15:30:38,665 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.id = $1::UUID
2025-06-13 15:30:38,665 INFO     [base.py:1842] [generated in 0.00020s] (UUID('ba6cae2d-4364-4500-a536-c82ef3f6ee79'),)
2025-06-13 15:30:38,666 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users
2025-06-13 15:30:38,666 INFO     [base.py:1842] [generated in 0.00014s] ()
2025-06-13 15:30:38,667 INFO     [base.py:2701] ROLLBACK
2025-06-13 15:30:38,668 DEBUG    [main.py:35] Ответ: 200
2025-06-13 15:30:55,920 DEBUG    [main.py:32] Входящий запрос: DELETE http://localhost:8000/api/v1/admin/user/tochka-test-user-1-f3027270-e24c-4ddd-a586-73d448300a37
2025-06-13 15:30:55,921 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 15:30:55,922 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.api_key = $1::VARCHAR
2025-06-13 15:30:55,922 INFO     [base.py:1842] [cached since 17.26s ago] ('8dd097d5-cbac-43ab-a032-3c85e357a117',)
2025-06-13 15:30:55,923 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.id = $1::UUID
2025-06-13 15:30:55,923 INFO     [base.py:1842] [cached since 17.26s ago] (UUID('ba6cae2d-4364-4500-a536-c82ef3f6ee79'),)
2025-06-13 15:30:55,924 INFO     [base.py:2701] ROLLBACK
2025-06-13 15:30:55,925 DEBUG    [main.py:35] Ответ: 422
2025-06-13 15:33:28,218 INFO     [main.py:27] Приложение запущено
2025-06-13 15:33:30,469 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/docs
2025-06-13 15:33:30,469 DEBUG    [main.py:35] Ответ: 200
2025-06-13 15:33:30,560 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/openapi.json
2025-06-13 15:33:30,578 DEBUG    [main.py:35] Ответ: 200
2025-06-13 15:34:33,798 DEBUG    [main.py:32] Входящий запрос: DELETE http://localhost:8000/api/v1/admin/user/17f6f8a2-0360-4c95-b051-729442cf7553
2025-06-13 15:34:33,823 INFO     [base.py:1842] select pg_catalog.version()
2025-06-13 15:34:33,824 INFO     [base.py:1842] [raw sql] ()
2025-06-13 15:34:33,825 INFO     [base.py:1842] select current_schema()
2025-06-13 15:34:33,825 INFO     [base.py:1842] [raw sql] ()
2025-06-13 15:34:33,827 INFO     [base.py:1842] show standard_conforming_strings
2025-06-13 15:34:33,827 INFO     [base.py:1842] [raw sql] ()
2025-06-13 15:34:33,828 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 15:34:33,842 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.api_key = $1::VARCHAR
2025-06-13 15:34:33,842 INFO     [base.py:1842] [generated in 0.00028s] ('8dd097d5-cbac-43ab-a032-3c85e357a117',)
2025-06-13 15:34:33,852 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.id = $1::UUID
2025-06-13 15:34:33,852 INFO     [base.py:1842] [generated in 0.00025s] (UUID('ba6cae2d-4364-4500-a536-c82ef3f6ee79'),)
2025-06-13 15:34:33,854 INFO     [base.py:1842] DELETE FROM orders WHERE orders.user_id = $1::UUID
2025-06-13 15:34:33,854 INFO     [base.py:1842] [generated in 0.00025s] (UUID('17f6f8a2-0360-4c95-b051-729442cf7553'),)
2025-06-13 15:34:33,861 INFO     [base.py:1842] DELETE FROM balances WHERE balances.user_id = $1::UUID
2025-06-13 15:34:33,861 INFO     [base.py:1842] [generated in 0.00023s] (UUID('17f6f8a2-0360-4c95-b051-729442cf7553'),)
2025-06-13 15:34:33,863 INFO     [base.py:1842] DELETE FROM transactions WHERE transactions.buy_order_id = $1::UUID OR transactions.sell_order_id = $2::UUID
2025-06-13 15:34:33,863 INFO     [base.py:1842] [generated in 0.00018s] (UUID('17f6f8a2-0360-4c95-b051-729442cf7553'), UUID('17f6f8a2-0360-4c95-b051-729442cf7553'))
2025-06-13 15:34:33,866 INFO     [base.py:1842] DELETE FROM users WHERE users.id = $1::UUID
2025-06-13 15:34:33,866 INFO     [base.py:1842] [generated in 0.00031s] (UUID('17f6f8a2-0360-4c95-b051-729442cf7553'),)
2025-06-13 15:34:33,867 INFO     [base.py:2704] COMMIT
2025-06-13 15:34:33,869 DEBUG    [main.py:35] Ответ: 200
2025-06-13 15:35:31,088 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/docs
2025-06-13 15:35:31,088 DEBUG    [main.py:35] Ответ: 200
2025-06-13 15:35:31,179 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/openapi.json
2025-06-13 15:35:31,180 DEBUG    [main.py:35] Ответ: 200
2025-06-13 15:35:50,782 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/api/v1/public/instrument
2025-06-13 15:35:50,783 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 15:35:50,785 INFO     [base.py:1842] SELECT instruments.ticker, instruments.name, instruments.status, instruments.currency, instruments.current_price 
FROM instruments 
WHERE instruments.status = $1::instrumentstatusenum
2025-06-13 15:35:50,785 INFO     [base.py:1842] [generated in 0.00024s] ('ACTIVE',)
2025-06-13 15:35:50,794 INFO     [base.py:2701] ROLLBACK
2025-06-13 15:35:50,795 DEBUG    [main.py:35] Ответ: 200
2025-06-13 15:36:58,120 DEBUG    [main.py:32] Входящий запрос: POST http://localhost:8000/api/v1/admin/instrument
2025-06-13 15:36:58,122 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 15:36:58,123 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.api_key = $1::VARCHAR
2025-06-13 15:36:58,123 INFO     [base.py:1842] [cached since 135.7s ago] ('8dd097d5-cbac-43ab-a032-3c85e357a117',)
2025-06-13 15:36:58,125 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.id = $1::UUID
2025-06-13 15:36:58,125 INFO     [base.py:1842] [cached since 135.7s ago] (UUID('ba6cae2d-4364-4500-a536-c82ef3f6ee79'),)
2025-06-13 15:36:58,128 INFO     [base.py:1842] SELECT instruments.ticker, instruments.name, instruments.status, instruments.currency, instruments.current_price 
FROM instruments 
WHERE instruments.ticker = $1::VARCHAR
2025-06-13 15:36:58,129 INFO     [base.py:1842] [generated in 0.00031s] ('ZLPRUB',)
2025-06-13 15:36:58,133 INFO     [base.py:1842] INSERT INTO instruments (ticker, name, status, currency, current_price) VALUES ($1::VARCHAR, $2::VARCHAR, $3::instrumentstatusenum, $4::VARCHAR, $5::INTEGER)
2025-06-13 15:36:58,134 INFO     [base.py:1842] [generated in 0.00041s] ('ZLPRUB', 'Zalypa / RUB', 'ACTIVE', 'RUB', 0)
2025-06-13 15:36:58,136 INFO     [base.py:2704] COMMIT
2025-06-13 15:36:58,141 DEBUG    [main.py:35] Ответ: 201
2025-06-13 15:37:32,476 DEBUG    [main.py:32] Входящий запрос: DELETE http://localhost:8000/api/v1/admin/instrument/ZLPRUB
2025-06-13 15:37:32,477 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 15:37:32,477 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.api_key = $1::VARCHAR
2025-06-13 15:37:32,477 INFO     [base.py:1842] [cached since 166.8s ago] ('8dd097d5-cbac-43ab-a032-3c85e357a117',)
2025-06-13 15:37:32,479 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.id = $1::UUID
2025-06-13 15:37:32,479 INFO     [base.py:1842] [cached since 166.7s ago] (UUID('ba6cae2d-4364-4500-a536-c82ef3f6ee79'),)
2025-06-13 15:37:32,481 INFO     [base.py:1842] DELETE FROM instruments WHERE instruments.ticker = $1::VARCHAR
2025-06-13 15:37:32,481 INFO     [base.py:1842] [generated in 0.00023s] ('ZLPRUB',)
2025-06-13 15:37:32,483 INFO     [base.py:2704] COMMIT
2025-06-13 15:37:32,488 DEBUG    [main.py:35] Ответ: 200
2025-06-13 15:38:00,846 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/api/v1/admin/users
2025-06-13 15:38:00,847 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 15:38:00,848 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.api_key = $1::VARCHAR
2025-06-13 15:38:00,848 INFO     [base.py:1842] [cached since 195.1s ago] ('8dd097d5-cbac-43ab-a032-3c85e357a117',)
2025-06-13 15:38:00,850 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.id = $1::UUID
2025-06-13 15:38:00,850 INFO     [base.py:1842] [cached since 195.1s ago] (UUID('ba6cae2d-4364-4500-a536-c82ef3f6ee79'),)
2025-06-13 15:38:00,851 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users
2025-06-13 15:38:00,852 INFO     [base.py:1842] [generated in 0.00020s] ()
2025-06-13 15:38:00,853 INFO     [base.py:2701] ROLLBACK
2025-06-13 15:38:00,854 DEBUG    [main.py:35] Ответ: 200
2025-06-13 15:40:46,628 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/docs
2025-06-13 15:40:46,629 DEBUG    [main.py:35] Ответ: 200
2025-06-13 15:40:46,718 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/openapi.json
2025-06-13 15:40:46,718 DEBUG    [main.py:35] Ответ: 200
2025-06-13 15:40:50,282 INFO     [main.py:27] Приложение запущено
2025-06-13 15:40:51,698 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/docs
2025-06-13 15:40:51,699 DEBUG    [main.py:35] Ответ: 200
2025-06-13 15:40:51,776 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/openapi.json
2025-06-13 15:40:51,794 DEBUG    [main.py:35] Ответ: 200
2025-06-13 15:41:44,449 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/api/v1/admin/balance
2025-06-13 15:41:44,487 INFO     [base.py:1842] select pg_catalog.version()
2025-06-13 15:41:44,487 INFO     [base.py:1842] [raw sql] ()
2025-06-13 15:41:44,489 INFO     [base.py:1842] select current_schema()
2025-06-13 15:41:44,489 INFO     [base.py:1842] [raw sql] ()
2025-06-13 15:41:44,490 INFO     [base.py:1842] show standard_conforming_strings
2025-06-13 15:41:44,490 INFO     [base.py:1842] [raw sql] ()
2025-06-13 15:41:44,492 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 15:41:44,504 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.api_key = $1::VARCHAR
2025-06-13 15:41:44,505 INFO     [base.py:1842] [generated in 0.00030s] ('fd341858-1eca-40ec-b9c3-8bb01351462e',)
2025-06-13 15:41:44,515 INFO     [base.py:2701] ROLLBACK
2025-06-13 15:41:44,516 DEBUG    [main.py:35] Ответ: 401
2025-06-13 15:42:04,724 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/api/v1/admin/balance
2025-06-13 15:42:04,725 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 15:42:04,726 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.api_key = $1::VARCHAR
2025-06-13 15:42:04,726 INFO     [base.py:1842] [cached since 17.5s ago] ('fd341858-1eca-40ec-b9c3-8bb01351462e',)
2025-06-13 15:42:04,727 INFO     [base.py:2701] ROLLBACK
2025-06-13 15:42:04,728 DEBUG    [main.py:35] Ответ: 401
2025-06-13 15:44:24,276 DEBUG    [main.py:32] Входящий запрос: POST http://localhost:8000/api/v1/public/register
2025-06-13 15:44:24,279 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 15:44:24,280 INFO     [base.py:1842] INSERT INTO users (id, username, password_hash, api_key, role, created_at) VALUES ($1::UUID, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::userrole, $6::TIMESTAMP WITH TIME ZONE)
2025-06-13 15:44:24,280 INFO     [base.py:1842] [generated in 0.00025s] (UUID('3a46de7d-43b0-4574-8671-816b663b28ff'), 'ivan_jobanov', '', 'd04ad609-dfdb-4867-b783-e8fa275051c2', 'ADMIN', datetime.datetime(2025, 6, 13, 15, 44, 24, 280750, tzinfo=datetime.timezone.utc))
2025-06-13 15:44:24,282 INFO     [base.py:2704] COMMIT
2025-06-13 15:44:24,287 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 15:44:24,288 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.id = $1::UUID
2025-06-13 15:44:24,288 INFO     [base.py:1842] [generated in 0.00020s] (UUID('3a46de7d-43b0-4574-8671-816b663b28ff'),)
2025-06-13 15:44:24,290 INFO     [base.py:2701] ROLLBACK
2025-06-13 15:44:24,291 DEBUG    [main.py:35] Ответ: 201
2025-06-13 15:45:06,138 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/api/v1/admin/users
2025-06-13 15:45:06,139 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 15:45:06,140 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.api_key = $1::VARCHAR
2025-06-13 15:45:06,140 INFO     [base.py:1842] [cached since 185.7s ago] ('d04ad609-dfdb-4867-b783-e8fa275051c2',)
2025-06-13 15:45:06,142 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.id = $1::UUID
2025-06-13 15:45:06,142 INFO     [base.py:1842] [generated in 0.00023s] (UUID('3a46de7d-43b0-4574-8671-816b663b28ff'),)
2025-06-13 15:45:06,144 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users
2025-06-13 15:45:06,144 INFO     [base.py:1842] [generated in 0.00018s] ()
2025-06-13 15:45:06,145 INFO     [base.py:2701] ROLLBACK
2025-06-13 15:45:06,146 DEBUG    [main.py:35] Ответ: 200
2025-06-13 15:45:34,938 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/api/v1/admin/balance
2025-06-13 15:45:34,939 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 15:45:34,940 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.api_key = $1::VARCHAR
2025-06-13 15:45:34,940 INFO     [base.py:1842] [cached since 210.3s ago] ('d04ad609-dfdb-4867-b783-e8fa275051c2',)
2025-06-13 15:45:34,942 INFO     [base.py:1842] SELECT balances.id, balances.user_id, balances.ticker, balances.amount 
FROM balances 
WHERE balances.user_id = $1::UUID
2025-06-13 15:45:34,943 INFO     [base.py:1842] [generated in 0.00023s] (UUID('3a46de7d-43b0-4574-8671-816b663b28ff'),)
2025-06-13 15:45:34,944 INFO     [base.py:2701] ROLLBACK
2025-06-13 15:45:34,945 DEBUG    [main.py:35] Ответ: 200
2025-06-13 15:45:59,682 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/api/v1/admin/balance
2025-06-13 15:45:59,683 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 15:45:59,683 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.api_key = $1::VARCHAR
2025-06-13 15:45:59,683 INFO     [base.py:1842] [cached since 227.7s ago] ('8dd097d5-cbac-43ab-a032-3c85e357a117',)
2025-06-13 15:45:59,685 INFO     [base.py:1842] SELECT balances.id, balances.user_id, balances.ticker, balances.amount 
FROM balances 
WHERE balances.user_id = $1::UUID
2025-06-13 15:45:59,685 INFO     [base.py:1842] [cached since 17.33s ago] (UUID('ba6cae2d-4364-4500-a536-c82ef3f6ee79'),)
2025-06-13 15:45:59,686 INFO     [base.py:2701] ROLLBACK
2025-06-13 15:45:59,687 DEBUG    [main.py:35] Ответ: 200
2025-06-13 15:46:04,618 DEBUG    [main.py:32] Входящий запрос: GET http://localhost:8000/api/v1/admin/users
2025-06-13 15:46:04,619 INFO     [base.py:2698] BEGIN (implicit)
2025-06-13 15:46:04,619 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.api_key = $1::VARCHAR
2025-06-13 15:46:04,619 INFO     [base.py:1842] [cached since 232.6s ago] ('8dd097d5-cbac-43ab-a032-3c85e357a117',)
2025-06-13 15:46:04,621 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users 
WHERE users.id = $1::UUID
2025-06-13 15:46:04,621 INFO     [base.py:1842] [cached since 46.88s ago] (UUID('ba6cae2d-4364-4500-a536-c82ef3f6ee79'),)
2025-06-13 15:46:04,622 INFO     [base.py:1842] SELECT users.id, users.username, users.password_hash, users.api_key, users.role, users.created_at 
FROM users
2025-06-13 15:46:04,622 INFO     [base.py:1842] [cached since 46.88s ago] ()
2025-06-13 15:46:04,623 INFO     [base.py:2701] ROLLBACK
2025-06-13 15:46:04,624 DEBUG    [main.py:35] Ответ: 200
